
│ • 富文本内容处理 │
│ • 分类和标签关联 │
│ • 发布流程控制 │
│ • 用户权限验证 │
└──────────────────────────────────────
───────────────────────┘
↓
┌──────────────────────────────────────
───────────────────────┐
│ 数据层 │
├──────────────────────────────────────
───────────────────────┤
│ • Post 模型创建和保存 │
│ • Category 模型关联 │
│ • Tag 模型关联 │
│ • 内容格式化存储 │
│ • 草稿保存功能(可选) │
└──────────────────────────────────────
───────────────────────┘
```
### 4. 个人中心功能架构
```
个人中心功能架构
┌──────────────────────────────────────
───────────────────────┐
│ 表示层 │
├──────────────────────────────────────
───────────────────────┤
│
┌──────────────────────────────────────
───────────────┐ │
│ │ 用户信息卡片 │ │
│ │ • 头像、昵称、简介、统计信息 │ │
│
└──────────────────────────────────────
───────────────┘ │
│ ┌─────────────┐ ┌─────────────┐
┌─────────────┐ │
│ │ 我的帖子 │ │ 我的收藏 │ │ 个人信息 │ │
│ │ Tab │ │ Tab │ │ Tab │ │
│ └─────────────┘ └─────────────┘
└─────────────┘ │
│
┌──────────────────────────────────────
───────────────┐ │
│ │ 内容列表区域 │ │
│ │ (根据 Tab 切换显示帖子/收藏/编辑表单) │ │
│
└──────────────────────────────────────
───────────────┘ │
└──────────────────────────────────────
───────────────────────┘
↓
┌──────────────────────────────────────
───────────────────────┐
│ 业务逻辑层 │
├──────────────────────────────────────
───────────────────────┤
│ • 用户数据查询 │
│ • 帖子管理逻辑(编辑、删除) │
│ • 收藏管理功能 │
│ • 个人信息更新验证 │
│ • 头像上传处理 │
└──────────────────────────────────────
───────────────────────┘
↓
┌──────────────────────────────────────
───────────────────────┐
│ 数据层 │
├──────────────────────────────────────
───────────────────────┤
│ • User 扩展模型 (个人信息) │
│ • Post 模型关联查询 │
│ • Favorite 模型关联 │
│ • 用户关系模型(关注/粉丝) │
│ • 统计信息计算 │
└──────────────────────────────────────
───────────────────────┘
```
### 5. 搜索页面功能架构
```
搜索页面功能架构
┌──────────────────────────────────────
───────────────────────┐
│ 表示层 │
├──────────────────────────────────────
───────────────────────┤
│
┌──────────────────────────────────────
───────────────┐ │
│ │ 搜索输入框和搜索按钮 │ │
│
└──────────────────────────────────────
───────────────┘ │
│ ┌─────────────┐ ┌─────────────┐
┌─────────────┐ │
│ │ 时间筛选 │ │ 分类筛选 │ │ 排序方式 │ │
│ └─────────────┘ └─────────────┘
└─────────────┘ │
│
┌──────────────────────────────────────
───────────────┐ │
│ │ 搜索结果列表 │ │
│
└──────────────────────────────────────
───────────────┘ │
│
┌──────────────────────────────────────
───────────────┐ │
│ │ 搜索历史记录 │ │
│
└──────────────────────────────────────
───────────────┘ │
└──────────────────────────────────────
───────────────────────┘
↓
┌──────────────────────────────────────
───────────────────────┐
│ 业务逻辑层 │
├──────────────────────────────────────
───────────────────────┤
│ • 关键词解析和处理 │
│ • 搜索算法执行 │
│ • 筛选条件应用 │
│ • 结果排序逻辑 │
│ • 搜索历史记录管理 │
└──────────────────────────────────────
───────────────────────┘
↓
┌──────────────────────────────────────
───────────────────────┐
│ 数据层 │
├──────────────────────────────────────
───────────────────────┤
│ • Post 模型全文搜索 │
│ • SearchHistory 模型 (搜索记录) │
│ • 数据库全文索引 │
│ • 缓存搜索建议 │
│ • 热门搜索统计 │
└──────────────────────────────────────
───────────────────────┘
```
### 6. 数据流架构图
```
数据流架构图
┌──────────┐ HTTP 请求 ┌──────────┐ ORM 操作 ┌─
─────────┐
│ │ ────────────> │ │ ────────────> │
│
│ 客户端 │ │ Django │ │ 数据库 │
│ (Client) │ │ Views │ │ (Database)│
│ │ <──────────── │ │ <──────────── │
│
└──────────┘ HTTP 响应 └──────────┘ 查询结果 └─
─────────┘
│ │ │
│ 用户交互 │ 业务逻辑处理 │ 数据持久化
│ 数据展示 │ 表单验证 │ 关系维护
│ 页面渲染 │ 权限控制 │ 事务管理
数据流向说明：
1. 客户端发起 HTTP 请求
2. Django URL 路由解析请求
3. Views 处理业务逻辑
4. Models 进行数据库操作
5. 数据返回给 Views
6. Views 渲染模板
7. 返回 HTTP 响应给客户端
```
## 🧠 思维导图结构
### 中心主题：贴吧系统架构
#### 1. 系统总体架构
- **表示层 (Presentation Layer)**
- Django 模板系统
- HTML/CSS/JavaScript
- Bootstrap 5 响应式框架
- Font Awesome 图标
- 用户交互界面
- **业务逻辑层 (Business Logic Layer)**
- Django Views
- 表单处理
- 权限控制
- 业务规则
- API 接口
- **数据层 (Data Layer)**
- Django Models
- 数据库 ORM
- SQLite/PostgreSQL
- 缓存机制
- 文件存储
#### 2. 首页/帖子列表功能
- **用户界面组件**
- 导航栏
- 分类筛选栏
- 帖子卡片列表
- 分页控件
- **业务逻辑**
- 帖子查询逻辑
- 分类过滤处理
- 热门排序算法
- 分页计算逻辑
- **数据模型**
- Post 模型
- title
- content
- author
- category
- created_at
- updated_at
- Category 模型
- User 模型
#### 3. 帖子详情功能
- **界面组件**
- 帖子内容展示区
- 作者信息面板
- 互动按钮组
- 点赞按钮
- 收藏按钮
- 评论按钮
- 评论列表
- 评论输入表单
- **业务逻辑**
- 帖子详情查询
- 评论列表获取
- 点赞/收藏业务
- 评论提交验证
- 权限验证
- **数据模型**
- Post 模型
- Comment 模型
- post
- author
- content
- created_at
- Like 模型
- Favorite 模型
#### 4. 发布帖子功能
- **界面组件**
- 标题输入框
- 富文本编辑器
- 分类选择器
- 标签输入框
- 操作按钮组
- **业务逻辑**
- 表单数据验证
- 富文本内容处理
- 分类标签关联
- 发布流程控制
- 用户权限验证
- **数据模型**
- Post 创建流程
- Category 关联
- Tag 关联
- 草稿保存功能
#### 5. 个人中心功能
- **界面组件**
- 用户信息卡片
- 头像
- 昵称
- 简介
- 统计信息
- 标签页导航
- 我的帖子
- 我的收藏
- 个人信息
- 内容列表区域
- **业务逻辑**
- 用户数据查询
- 帖子管理逻辑
- 编辑功能
- 删除功能
- 收藏管理功能
- 个人信息更新
- 头像上传处理
- **数据模型**
- User 扩展模型
- Post 关联查询
- Favorite 关联
- 用户关系模型
- 统计信息计算
#### 6. 搜索功能
- **界面组件**
- 搜索输入框
- 搜索按钮
- 筛选条件
- 时间范围
- 分类筛选
- 排序方式
- 结果列表
- 搜索历史
- **业务逻辑**
- 关键词解析
- 搜索算法执行
- 筛选条件应用
- 结果排序逻辑
- 搜索历史管理
- **数据模型**
- Post 全文搜索
- SearchHistory 模型
- 数据库全文索引
- 缓存搜索建议
- 热门搜索统计
#### 7. 数据流架构
- **请求流程**
- HTTP 请求接收
- URL 路由解析
- 视图函数处理
- 数据操作执行
- 响应返回
- **数据流向**
- 模板渲染流程
- 表单提交流程
- 数据处理流程
- 数据库存储
- **响应流程**
- 数据序列化
- 模板渲染
- HTTP 响应
- 客户端接收
#### 8. 技术栈组成
- **前端技术**
- HTML5
- CSS3
- Bootstrap 5
- 自定义样式
- JavaScript
- 原生 JS
- AJAX 交互
- 响应式设计
- **后端技术**
- Django 框架
- Python 3.x
- 数据库 ORM
- 模板引擎
- 表单处理
- **部署运维**
- 数据库配置
- 静态文件处理
- 缓存机制
- 安全配置
- 性能优化
#### 9. 功能特性
- **用户体验优化**
- 加载动画
- 表单验证
- 确认对话框
- 实时预览
- **权限控制**
- 用户认证
- 操作权限
- 内容权限
- 管理员权限
- **现代化特性**
- 响应式布局
- 富文本编辑
- 图片上传
- 搜索优化
#### 10. 开发规范
- **代码结构**
- 项目组织
- 应用划分
- 模板继承
- 静态文件管理
- **配置管理**
- 环境配置
- 数据库配置
- 缓存配置
- 安全配置
- **部署流程**
- 依赖管理
- 数据库迁移
- 静态文件收集
- 服务器配置
## 📋 文档说明
### 架构设计原则
1. **分层架构** - 清晰的表示层、业务逻辑层、数据层分离
2. **模块化设计** - 各功能独立开发测试
3. **高内聚低耦合** - 各层职责明确，相互依赖最小化
4. **可扩展性** - 易于添加新功能模块
5. **可维护性** - 清晰的代码结构和数据流向
### 技术特点
- **现代化前端** - Bootstrap 5 + 响应式设计
- **强大后端** - Django 框架 + Python
- **数据安全** - 完善的权限控制和数据验证
- **用户体验** - 丰富的交互功能和实时反馈
### 部署建议
1. **开发环境** - SQLite 数据库，Django 开发服务器
2. **测试环境** - 与生产环境相似的配置
3. **生产环境** - PostgreSQL 数据库，Nginx + Gunicorn 部署